---
// Get version from the main package.json
const version = "0.2.74"; // We'll use a fixed version for the docs
---

<div class="fixed top-4 right-4 z-10 text-xs bg-[#faf9f7] border border-[#ccc] min-w-[180px] max-md:top-auto max-md:bottom-4 max-md:right-4 max-md:left-4 max-md:min-w-0" id="settings-panel">
  <div class="flex items-center gap-2 px-2.5 py-1.5 border-b border-dashed border-[#ccc] bg-[#f0eeeb]">
    <span class="opacity-60">⚙</span>
    <span class="text-[#666] lowercase">settings</span>
  </div>
  <div class="px-2.5 py-2">
    <div class="flex justify-between items-center py-1">
      <span class="text-[#666] mr-2 before:content-['//_'] before:text-border">examples mode:</span>
      <div class="flex items-center gap-1">
        <button type="button" class="toggle-btn font-mono text-xs bg-transparent border-none cursor-pointer text-[#666] px-1.5 py-0.5 rounded-sm transition-colors hover:text-[#1a1a1a] aria-pressed:text-[#faf9f7] aria-pressed:bg-[#1a1a1a]" data-mode="css" aria-pressed="true">
          css
        </button>
        <span class="text-border">/</span>
        <button type="button" class="toggle-btn font-mono text-xs bg-transparent border-none cursor-pointer text-[#666] px-1.5 py-0.5 rounded-sm transition-colors hover:text-[#1a1a1a] aria-pressed:text-[#faf9f7] aria-pressed:bg-[#1a1a1a]" data-mode="tailwind" aria-pressed="false">
          tailwind
        </button>
      </div>
    </div>
    <div class="flex justify-between items-center py-1">
      <span class="text-[#666] mr-2 before:content-['//_'] before:text-border">ver:</span>
      <span class="text-[#22863a]">{version}</span>
    </div>
  </div>
  <div class="px-2.5 py-1.5 border-t border-dashed border-[#ccc] flex gap-2 items-center">
    <a href="https://github.com/bejamas/data-slot" class="text-[#666] no-underline text-[0.75rem] hover:text-[#0066cc]">github</a>
    <span class="text-border text-[0.75rem]">·</span>
    <a href="https://npmjs.com/org/data-slot" class="text-[#666] no-underline text-[0.75rem] hover:text-[#0066cc]">npm</a>
  </div>
</div>

<script>
  function initSettingsPanel() {
    const buttons = document.querySelectorAll("#settings-panel .toggle-btn");

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const mode = btn.getAttribute("data-mode");

        // Update button states
        buttons.forEach((b) => {
          b.setAttribute("aria-pressed", b === btn ? "true" : "false");
        });

        // Update HTML class
        document.documentElement.classList.remove("mode-css", "mode-tailwind");
        document.documentElement.classList.add(`mode-${mode}`);

        // Persist preference
        localStorage.setItem("code-mode", mode ?? "");
      });
    });

    // Restore state on load
    const savedMode = localStorage.getItem("code-mode");
    if (savedMode) {
      const activeBtn = document.querySelector(
        `#settings-panel .toggle-btn[data-mode="${savedMode}"]`
      );
      if (activeBtn) {
        buttons.forEach((b) => {
          b.setAttribute("aria-pressed", b === activeBtn ? "true" : "false");
        });
      }
    }
  }

  initSettingsPanel();
</script>
