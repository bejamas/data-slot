---
import { Code } from "astro:components";
import ExampleBlock from "../ExampleBlock.astro";

const cssCode = `<div data-slot="dialog">
  <button data-slot="dialog-trigger" class="dialog-trigger-btn">Open Dialog</button>
  <div data-slot="dialog-overlay" class="dialog-overlay" hidden></div>
  <div data-slot="dialog-content" class="dialog-panel" hidden>
    <h2 data-slot="dialog-title" class="dialog-title">Confirm Action</h2>
    <p data-slot="dialog-description" class="dialog-description">
      This dialog traps focus and can be closed with Escape or clicking outside.
    </p>
    <button data-slot="dialog-close" class="dialog-close-btn">Close</button>
  </div>
</div>

<style>
  .dialog-trigger-btn {
    padding: 0.5rem 1rem;
    background: #1a1a1a;
    color: #faf9f7;
    border: none;
    cursor: pointer;
  }
  .dialog-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 100;
  }
  .dialog-overlay[hidden] { display: none; }
  .dialog-panel {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #faf9f7;
    padding: 2rem;
    max-width: 400px;
    width: calc(100% - 2rem);
    border: 1px solid #ccc;
    z-index: 101;
  }
  .dialog-panel[hidden] { display: none; }
  .dialog-title { font-weight: 700; margin-bottom: 0.5rem; }
  .dialog-description { color: #666; margin-bottom: 1.5rem; }
  .dialog-close-btn {
    padding: 0.4rem 0.8rem;
    background: none;
    border: 1px solid #ccc;
    cursor: pointer;
  }
</style>`;

const tailwindCode = `<div data-slot="dialog" class="group/dialog">
  <button
    data-slot="dialog-trigger"
    class="px-4 py-2 bg-gray-900 text-white border-none cursor-pointer
           hover:opacity-90 transition-opacity"
  >
    Open Dialog
  </button>
  <div
    data-slot="dialog-overlay"
    class="fixed inset-0 bg-black/50 z-50 opacity-0
           group-data-[state=open]/dialog:opacity-100
           transition-opacity duration-200"
    hidden
  ></div>
  <div
    data-slot="dialog-content"
    class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
           bg-white p-8 max-w-md w-[calc(100%-2rem)] border border-gray-300
           rounded-lg z-50 opacity-0 scale-95
           group-data-[state=open]/dialog:opacity-100
           group-data-[state=open]/dialog:scale-100
           transition-all duration-200"
    hidden
  >
    <h2 data-slot="dialog-title" class="font-bold mb-2 mt-0">Confirm Action</h2>
    <p data-slot="dialog-description" class="text-gray-500 mb-6">
      This dialog traps focus and can be closed with Escape or clicking outside.
    </p>
    <button
      data-slot="dialog-close"
      class="px-3 py-1.5 bg-transparent border border-gray-300 cursor-pointer
             hover:bg-code-bg transition-colors"
    >
      Close
    </button>
  </div>
</div>

/* CSS override needed to allow transitions with hidden attribute */
[data-slot="dialog-overlay"][hidden],
[data-slot="dialog-content"][hidden] {
  display: block !important;
  pointer-events: none;
}`;
---

<ExampleBlock>
  <div slot="preview-css" data-slot="dialog" data-close-on-click-outside="false" id="demo-dialog-css">
    <button data-slot="dialog-trigger" class="dialog-trigger-btn">Open Dialog</button>
    <div data-slot="dialog-overlay" class="dialog-overlay" hidden></div>
    <div data-slot="dialog-content" class="dialog-panel" hidden>
      <div class="dialog-title" data-slot="dialog-title">Confirm Action</div>
      <p class="dialog-description" data-slot="dialog-description">
        This dialog traps focus and can be closed with Escape or clicking outside.
      </p>
      <button data-slot="dialog-close" class="dialog-close-btn">Close</button>
    </div>
  </div>
  <div slot="preview-tailwind" data-slot="dialog" id="demo-dialog-tw" class="group/dialog">
    <button
      data-slot="dialog-trigger"
      class="px-4 py-2 bg-gray-900 text-white border-none cursor-pointer hover:opacity-90 transition-opacity"
    >
      Open Dialog
    </button>
    <div
      data-slot="dialog-overlay"
      class="fixed inset-0 bg-black/50 z-50 [hidden]:opacity-0 group-data-[state=open]/dialog:opacity-100 transition-opacity duration-200"
      hidden
    ></div>
    <div
      data-slot="dialog-content"
      class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-8 max-w-md w-[calc(100%-2rem)] border border-gray-300 rounded-lg z-50 opacity-0 scale-95 group-data-[state=open]/dialog:opacity-100 group-data-[state=open]/dialog:scale-100 transition-all duration-200"
      hidden
    >
      <h2 data-slot="dialog-title" class="font-bold mb-2 mt-0">Confirm Action</h2>
      <p data-slot="dialog-description" class="text-gray-500 mb-6">
        This dialog traps focus and can be closed with Escape or clicking outside.
      </p>
      <button
        data-slot="dialog-close"
        class="px-3 py-1.5 bg-transparent border border-gray-300 cursor-pointer hover:bg-code-bg transition-colors"
      >
        Close
      </button>
    </div>
  </div>
  <Code slot="code-css" code={cssCode} lang="html" theme="vitesse-light" />
  <Code slot="code-tailwind" code={tailwindCode} lang="html" theme="vitesse-light" />
</ExampleBlock>

