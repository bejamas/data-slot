---
import { Code } from "astro:components";
import ExampleBlock from "../ExampleBlock.astro";

const cssCode = `<nav data-slot="navigation-menu" class="nav-menu">
  <ul data-slot="navigation-menu-list" class="nav-menu-list">
    <li data-slot="navigation-menu-item" data-value="products" class="nav-menu-item">
      <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Products</button>
      <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
        <div class="nav-menu-grid">
          <a href="#" class="nav-menu-link">
            <div class="nav-menu-link-title">Analytics</div>
            <div class="nav-menu-link-desc">Real-time metrics</div>
          </a>
          <!-- More links... -->
        </div>
      </div>
    </li>
    <!-- More items... -->
    <div data-slot="navigation-menu-indicator" class="nav-menu-indicator"></div>
  </ul>
  <div data-slot="navigation-menu-viewport" class="nav-menu-viewport"></div>
</nav>

<style>
  .nav-menu { position: relative; }
  .nav-menu-list { display: flex; list-style: none; position: relative; }
  .nav-menu-trigger {
    padding: 0.6rem 1rem;
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.35rem;
  }
  .nav-menu-trigger::after { content: "▼"; font-size: 0.6rem; }
  .nav-menu-trigger[data-state="open"]::after { transform: rotate(180deg); }
  .nav-menu-viewport {
    position: absolute;
    top: 100%;
    background: #faf9f7;
    border-radius: 8px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.12);
    width: var(--viewport-width, 0);
    height: var(--viewport-height, 0);
    transition: width 0.25s, height 0.25s;
  }
  .nav-menu-content { position: absolute; top: 100%; padding: 1.5rem 1rem; }
  .nav-menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; width: 380px; }
</style>`;

const tailwindCode = `<nav data-slot="navigation-menu" class="relative">
  <ul data-slot="navigation-menu-list" class="flex list-none relative">
    <li data-slot="navigation-menu-item" data-value="products" class="static">
      <button
        data-slot="navigation-menu-trigger"
        class="px-4 py-2.5 bg-transparent border-none cursor-pointer
               flex items-center gap-1.5 transition-colors
               hover:text-blue-600 data-[state=open]:text-blue-600
               after:content-['▼'] after:text-[0.6rem]
               after:transition-transform after:duration-200
               data-[state=open]:after:rotate-180"
      >
        Products
      </button>
      <div
        data-slot="navigation-menu-content"
        class="absolute top-full left-0 p-6 opacity-100
               data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none"
        hidden
      >
        <div class="grid grid-cols-2 gap-3 w-[380px]">
          <a href="#" class="block p-3 rounded hover:bg-gray-100 transition-colors">
            <div class="font-medium mb-1">Analytics</div>
            <div class="text-sm text-gray-500">Real-time metrics</div>
          </a>
          <!-- More links... -->
        </div>
      </div>
    </li>
    <!-- More items... -->
    <div
      data-slot="navigation-menu-indicator"
      class="absolute bg-gray-100 rounded-md transition-all duration-150
             pointer-events-none z-0
             [left:var(--indicator-left,0)] [top:var(--indicator-top,0)]
             [width:var(--indicator-width,0)] [height:var(--indicator-height,0)]
             data-[state=hidden]:opacity-0 data-[state=visible]:opacity-100"
    ></div>
  </ul>
  <div
    data-slot="navigation-menu-viewport"
    class="absolute top-full left-0 bg-white rounded-lg shadow-lg
           overflow-hidden mt-2 transition-all duration-300
           [width:var(--viewport-width,0)] [height:var(--viewport-height,0)]
           data-[state=closed]:opacity-0 data-[state=open]:pointer-events-auto"
  ></div>
</nav>`;
---

<ExampleBlock label="mega menu with directional animations">
  <nav slot="preview" data-slot="navigation-menu" class="nav-menu">
    <ul data-slot="navigation-menu-list" class="nav-menu-list">
      <li data-slot="navigation-menu-item" data-value="products" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Products</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Analytics</div>
              <div class="nav-menu-link-desc">Real-time metrics</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Automation</div>
              <div class="nav-menu-link-desc">Workflow tools</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Security</div>
              <div class="nav-menu-link-desc">Enterprise-grade</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Integrations</div>
              <div class="nav-menu-link-desc">Connect everything</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="solutions" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Solutions</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Startups</div>
              <div class="nav-menu-link-desc">Move fast</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Enterprise</div>
              <div class="nav-menu-link-desc">Scale securely</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Agencies</div>
              <div class="nav-menu-link-desc">Client projects</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">E-commerce</div>
              <div class="nav-menu-link-desc">Sell online</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="resources" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Resources</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid-wide">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Documentation</div>
              <div class="nav-menu-link-desc">Get started</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Blog</div>
              <div class="nav-menu-link-desc">Latest updates</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Contact</div>
              <div class="nav-menu-link-desc">Get in touch</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Support</div>
              <div class="nav-menu-link-desc">Get help</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Training</div>
              <div class="nav-menu-link-desc">Learn new skills</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Events</div>
              <div class="nav-menu-link-desc">Upcoming webinars</div>
            </a>
          </div>
        </div>
      </li>
      <div data-slot="navigation-menu-indicator" class="nav-menu-indicator"></div>
    </ul>
    <div data-slot="navigation-menu-viewport" class="nav-menu-viewport"></div>
  </nav>
  <p slot="note" class="demo-note">
    Hover between items — content slides with direction. Viewport width animates smoothly.
    CSS variables: <code>--viewport-width</code>, <code>--viewport-height</code>, <code>--motion-direction</code>.
  </p>
  <Code slot="code-css" code={cssCode} lang="html" theme="vitesse-light" />
  <Code slot="code-tailwind" code={tailwindCode} lang="html" theme="vitesse-light" />
</ExampleBlock>

