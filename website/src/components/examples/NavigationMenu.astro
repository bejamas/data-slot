---
import { Code } from "astro:components";
import ExampleBlock from "../ExampleBlock.astro";

const cssCode = `<nav data-slot="navigation-menu" class="nav-menu">
  <ul data-slot="navigation-menu-list" class="nav-menu-list">
    <li data-slot="navigation-menu-item" data-value="products" class="nav-menu-item">
      <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Products</button>
      <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
        <div class="nav-menu-grid">
          <a href="#" class="nav-menu-link">
            <div class="nav-menu-link-title">Analytics</div>
            <div class="nav-menu-link-desc">Real-time metrics</div>
          </a>
          <!-- More links... -->
        </div>
      </div>
    </li>
    <!-- More items... -->
    <div data-slot="navigation-menu-indicator" class="nav-menu-indicator"></div>
  </ul>
  <div data-slot="navigation-menu-viewport" class="nav-menu-viewport"></div>
</nav>

<style>
  .nav-menu { position: relative; }
  .nav-menu-list { display: flex; list-style: none; position: relative; }
  .nav-menu-trigger {
    padding: 0.6rem 1rem;
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.35rem;
  }
  .nav-menu-trigger::after { content: "▼"; font-size: 0.6rem; }
  .nav-menu-trigger[data-state="open"]::after { transform: rotate(180deg); }
  .nav-menu-viewport {
    position: absolute;
    top: 100%;
    left: var(--viewport-left, 0);
    background: #faf9f7;
    border-radius: 8px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.12);
    width: var(--viewport-width, 0);
    height: var(--viewport-height, 0);
    transition: left 0.25s, width 0.25s, height 0.25s;
  }
  .nav-menu-content { position: absolute; top: 100%; padding: 1.5rem 1rem; }
  .nav-menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; width: 380px; }
</style>`;

const tailwindCode = `<nav data-slot="navigation-menu" class="relative">
  <ul data-slot="navigation-menu-list" class="flex relative list-none">
    <li data-slot="navigation-menu-item" data-value="products" class="static">
      <button
        data-slot="navigation-menu-trigger"
        class="px-4 py-2.5 bg-transparent border-none cursor-pointer
               flex items-center gap-1.5 transition-colors relative z-1
               hover:text-accent data-[state=open]:text-accent
               after:content-['▼'] after:text-[0.6rem]
               after:transition-transform after:duration-200
               data-[state=open]:after:rotate-180"
      >
        Products
      </button>
      <div
        data-slot="navigation-menu-content"
        class="absolute top-full pt-6 px-4 pb-0
               data-motion[from-right]:animate-slide-in-from-right-4 data-motion[from-left]:animate-slide-in-from-left-4
               data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none
               data-[state=inactive]:invisible data-[state=active]:visible"
        hidden
      >
        <div class="grid grid-cols-2 gap-3 w-[380px]">
          <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
            <div class="mb-1 font-medium">Analytics</div>
            <div class="text-sm text-muted">Real-time metrics</div>
          </a>
          <!-- More links... -->
        </div>
      </div>
    </li>
    <!-- More items... -->
    <div
      data-slot="navigation-menu-indicator"
      class="absolute bg-code-bg z-0 rounded-md transition-all duration-150
             pointer-events-none opacity-0 data-[state=visible]:opacity-100"
      style="left: var(--indicator-left, 0); top: var(--indicator-top, 0);
             width: var(--indicator-width, 0); height: var(--indicator-height, 0);"
    ></div>
  </ul>
  <div
    data-slot="navigation-menu-viewport"
    class="absolute top-full bg-bg rounded-lg shadow-lg
           overflow-hidden mt-2 opacity-0 pointer-events-none
           data-[state=open]:opacity-100 data-[state=open]:pointer-events-auto"
    style="left: var(--viewport-left, 0); width: var(--viewport-width, 0); height: var(--viewport-height, 0);"
  ></div>
</nav>

/* CSS needed for animations (viewport size + content direction) */
[data-slot="navigation-menu-viewport"] {
  transition: left 0.25s cubic-bezier(0.32, 0.72, 0, 1),
              width 0.25s cubic-bezier(0.32, 0.72, 0, 1),
              height 0.25s cubic-bezier(0.32, 0.72, 0, 1),
              opacity 0.15s ease;
  will-change: left, width, height;
}
[data-slot="navigation-menu-viewport"][data-instant] {
  transition: opacity 0.15s ease;
}
[data-slot="navigation-menu-content"][data-motion="from-right"] {
  animation: slideFromRight 0.25s ease;
}
[data-slot="navigation-menu-content"][data-motion="from-left"] {
  animation: slideFromLeft 0.25s ease;
}`;
---

<ExampleBlock label="mega menu with directional animations">
  <nav slot="preview-css" data-slot="navigation-menu" class="nav-menu" id="nav-menu-css">
  
    <ul data-slot="navigation-menu-list" class="nav-menu-list">
      <li data-slot="navigation-menu-item" data-value="products" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Products</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Analytics</div>
              <div class="nav-menu-link-desc">Real-time metrics</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Automation</div>
              <div class="nav-menu-link-desc">Workflow tools</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Security</div>
              <div class="nav-menu-link-desc">Enterprise-grade</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Integrations</div>
              <div class="nav-menu-link-desc">Connect everything</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="solutions" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Solutions</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Startups</div>
              <div class="nav-menu-link-desc">Move fast</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Enterprise</div>
              <div class="nav-menu-link-desc">Scale securely</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Agencies</div>
              <div class="nav-menu-link-desc">Client projects</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">E-commerce</div>
              <div class="nav-menu-link-desc">Sell online</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="resources" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Resources</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-grid-wide">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Documentation</div>
              <div class="nav-menu-link-desc">Get started</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Blog</div>
              <div class="nav-menu-link-desc">Latest updates</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Contact</div>
              <div class="nav-menu-link-desc">Get in touch</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Support</div>
              <div class="nav-menu-link-desc">Get help</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Training</div>
              <div class="nav-menu-link-desc">Learn new skills</div>
            </a>
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">Events</div>
              <div class="nav-menu-link-desc">Upcoming webinars</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="company" class="nav-menu-item">
        <button data-slot="navigation-menu-trigger" class="nav-menu-trigger">Company</button>
        <div data-slot="navigation-menu-content" class="nav-menu-content" hidden>
          <div class="nav-menu-single">
            <a href="#" class="nav-menu-link">
              <div class="nav-menu-link-title">About Us</div>
              <div class="nav-menu-link-desc">Our story</div>
            </a>
          </div>
        </div>
      </li>
      <div data-slot="navigation-menu-indicator" class="nav-menu-indicator"></div>
    </ul>
  
    <div data-slot="navigation-menu-positioner" class="isolate z-50" data-side-offset="4">
        <div data-slot="navigation-menu-viewport" class="nav-menu-viewport"></div>
    </div>

  </nav>
  
  <nav slot="preview-tailwind" data-slot="navigation-menu" class="relative" id="nav-menu-tw">
    <ul data-slot="navigation-menu-list" class="
      flex list-none relative z-10
      [&_[data-slot='navigation-menu-content'][data-state='active']]:animate-in
[&_[data-slot='navigation-menu-content'][data-state='inactive']]:animate-out
[&_[data-slot='navigation-menu-content'][data-motion='from-right']]:slide-in-from-right-4
[&_[data-slot='navigation-menu-content'][data-motion='from-left']]:slide-in-from-left-4
[&_[data-slot='navigation-menu-content'][data-motion='to-right']]:slide-to-right-4
[&_[data-slot='navigation-menu-content'][data-motion='to-left']]:slide-to-left-4
      "
    >
      <li data-slot="navigation-menu-item" data-value="products" class="static">
        <button
          data-slot="navigation-menu-trigger"
          class="px-4 py-2.5 z-1 relative bg-transparent border-none cursor-pointer flex items-center gap-1.5 transition-colors hover:text-accent data-[state=open]:text-accent after:content-['▼'] after:text-[0.6rem] after:transition-transform after:duration-200 data-[state=open]:after:rotate-180"
        >
          Products
        </button>
        <div
          data-slot="navigation-menu-content"
          class="absolute top-0 opacity-100 data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none data-motion[from-right]:animate-slide-in-from-right-4 data-motion[from-left]:animate-slide-in-from-left-4 data-[motion='from-left']:slide-in-from-left-4 data-motion[to-right]:animate-slide-to-right-4 data-[state=active]:animate-in data-[state=inactive]:animate-out "
          hidden
        >
          <div class="grid grid-cols-2 gap-3 w-[380px] p-2">
            <a href="#" class="block p-3 no-underline rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Analytics</div>
              <div class="text-sm text-muted">Real-time metrics</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Automation</div>
              <div class="text-sm text-muted">Workflow tools</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Security</div>
              <div class="text-sm text-muted">Enterprise-grade</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Integrations</div>
              <div class="text-sm text-muted">Connect everything</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="solutions" data-align="center" class="static">
        <button
          data-slot="navigation-menu-trigger"
          class="px-4 py-2.5 z-1 relative bg-transparent border-none cursor-pointer flex items-center gap-1.5 transition-colors hover:text-accent data-[state=open]:text-accent after:content-['▼'] after:text-[0.6rem] after:transition-transform after:duration-200 data-[state=open]:after:rotate-180"
        >
          Solutions
        </button>
        <div
          data-slot="navigation-menu-content"
          class="absolute top-0 opacity-100 data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none"
          hidden
        >
          <div class="grid grid-cols-2 gap-2 w-[380px] p-2">
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Startups</div>
              <div class="text-sm text-muted">Move fast</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Enterprise</div>
              <div class="text-sm text-muted">Scale securely</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Agencies</div>
              <div class="text-sm text-muted">Client projects</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">E-commerce</div>
              <div class="text-sm text-muted">Sell online</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="resources" data-align="center" class="static">
        <button
          data-slot="navigation-menu-trigger"
          class="px-4 py-2.5 z-1 relative bg-transparent border-none cursor-pointer flex items-center gap-1.5 transition-colors hover:text-accent data-[state=open]:text-accent after:content-['▼'] after:text-[0.6rem] after:transition-transform after:duration-200 data-[state=open]:after:rotate-180"
        >
          Resources
        </button>
        <div
          data-slot="navigation-menu-content"
          class="absolute top-0 opacity-100 data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none"
          hidden
        >
          <div class="grid grid-cols-3 gap-3 p-2 w-[520px]">
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Documentation</div>
              <div class="text-sm text-muted">Get started</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Blog</div>
              <div class="text-sm text-muted">Latest updates</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Contact</div>
              <div class="text-sm text-muted">Get in touch</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Support</div>
              <div class="text-sm text-muted">Get help</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Training</div>
              <div class="text-sm text-muted">Learn new skills</div>
            </a>
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">Events</div>
              <div class="text-sm text-muted">Upcoming webinars</div>
            </a>
          </div>
        </div>
      </li>
      <li data-slot="navigation-menu-item" data-value="company" class="static">
        <button
          data-slot="navigation-menu-trigger"
          class="px-4 py-2.5 z-1 relative bg-transparent border-none cursor-pointer flex items-center gap-1.5 transition-colors hover:text-accent data-[state=open]:text-accent after:content-['▼'] after:text-[0.6rem] after:transition-transform after:duration-200 data-[state=open]:after:rotate-180"
        >
          Company
        </button>
        <div
          data-slot="navigation-menu-content"
          class="absolute top-0 opacity-100 data-[state=inactive]:opacity-0 data-[state=inactive]:pointer-events-none"
          hidden
        >
          <div class="w-[140px] p-2">
            <a href="#" class="block p-3 rounded transition-colors hover:bg-code-bg text-inherit">
              <div class="mb-1 font-medium">About Us</div>
              <div class="text-sm text-muted">Our story</div>
            </a>
          </div>
        </div>
      </li>
      <div
        data-slot="navigation-menu-indicator"
        class="absolute bg-code-bg z-0 rounded-md transition-all duration-150 pointer-events-none opacity-0 data-[state=visible]:opacity-100"
        style="left: var(--indicator-left, 0); top: var(--indicator-top, 0); width: var(--indicator-width, 0); height: var(--indicator-height, 0);"
      ></div>
    </ul>
    <div
      data-slot="navigation-menu-viewport"
      class="absolute mt-2 data-instant:transition-opacity duration-150 top-full bg-bg rounded-lg shadow-[0_4px_24px_rgba(0,0,0,0.12),0_0_0_1px_var(--color-border)] overflow-hidden opacity-0 pointer-events-none data-[state=open]:opacity-100 data-[state=open]:pointer-events-auto"
      style="left: var(--viewport-left, 0); width: var(--viewport-width, 0); height: var(--viewport-height, 0);"
    ></div>
  </nav>
  <div slot="note">
    <p class="mt-3 text-muted">
      Hover between items — content slides with direction. Viewport animates smoothly.
    </p>
    <p class="mt-3 text-muted">
      CSS variables: <code>--viewport-left</code>, <code>--viewport-width</code>, <code>--viewport-height</code>, <code>--motion-direction</code>.
    </p>
    <p class="mt-3 text-muted">
      Use <code>data-align="start|center|end"</code> on items to control alignment.
    </p>
  </div>
  <Code slot="code-css" code={cssCode} lang="html" theme="vitesse-light" />
  <Code slot="code-tailwind" code={tailwindCode} lang="html" theme="vitesse-light" />
</ExampleBlock>

