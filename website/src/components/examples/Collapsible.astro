---
import { Code } from "astro:components";
import ExampleBlock from "../ExampleBlock.astro";

const cssCode = `<div data-slot="collapsible">
  <button data-slot="collapsible-trigger" class="collapsible-trigger-btn">
    Show more details
  </button>
  <div class="collapsible-content-wrapper">
    <div data-slot="collapsible-content" class="collapsible-content">
      <div class="collapsible-content-inner">
        <p>Collapsible is the simplest component — just a trigger and content.</p>
        <p>Perfect for FAQ items, collapsible sections, or any show/hide pattern.</p>
      </div>
    </div>
  </div>
</div>

<style>
  .collapsible-trigger-btn {
    padding: 0.5rem 1rem;
    background: none;
    border: 1px dashed #ccc;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .collapsible-trigger-btn::before {
    content: "▶";
    font-size: 0.7rem;
    transition: transform 0.2s;
  }
  .collapsible-trigger-btn[aria-expanded="true"]::before {
    transform: rotate(90deg);
  }
  .collapsible-content-wrapper {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.3s;
  }
  [data-slot="collapsible"][data-state="open"] .collapsible-content-wrapper {
    grid-template-rows: 1fr;
  }
  .collapsible-content {
    overflow: hidden;
    min-height: 0;
  }
  .collapsible-content[hidden] { display: block !important; }
  .collapsible-content-inner {
    padding: 1rem;
    margin-top: 0.5rem;
    background: #f0eeeb;
  }
</style>`;

const tailwindCode = `<div data-slot="collapsible" class="group">
  <button
    data-slot="collapsible-trigger"
    class="px-4 py-2 bg-transparent border border-dashed border-gray-300
           cursor-pointer flex items-center gap-2 hover:bg-code-bg
           before:content-['▶'] before:text-[0.7rem]
           before:transition-transform before:duration-200
           aria-expanded:before:rotate-90"
  >
    Show more details
  </button>
  <div
    class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300
           group-data-[state=open]:grid-rows-[1fr]"
  >
    <div data-slot="collapsible-content" class="overflow-hidden min-h-0">
      <div class="p-4 mt-2 bg-code-bg">
        <p>Collapsible is the simplest component — just a trigger and content.</p>
        <p class="mt-2">Perfect for FAQ items, collapsible sections, or any show/hide pattern.</p>
      </div>
    </div>
  </div>
</div>`;
---

<ExampleBlock>
  <div slot="preview-css" data-slot="collapsible" id="collapsible-css">
    <button data-slot="collapsible-trigger" class="collapsible-trigger-btn">
      Show more details
    </button>
    <div class="collapsible-content-wrapper">
      <div data-slot="collapsible-content" class="collapsible-content">
        <div class="collapsible-content-inner">
          <p>Collapsible is the simplest component — just a trigger and content.</p>
          <p style="margin-top: 0.5rem">
            Perfect for FAQ items, collapsible sections, or any show/hide pattern.
          </p>
        </div>
      </div>
    </div>
  </div>
  <div slot="preview-tailwind" data-slot="collapsible" id="collapsible-tw" class="group">
    <button
      data-slot="collapsible-trigger"
      class="px-4 py-2 bg-transparent border border-dashed border-gray-300 cursor-pointer flex items-center gap-2 hover:bg-code-bg before:content-['▶'] before:text-[0.7rem] before:transition-transform before:duration-200 aria-expanded:before:rotate-90"
    >
      Show more details
    </button>
    <div class="grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 group-data-[state=open]:grid-rows-[1fr]">
      <div data-slot="collapsible-content" class="overflow-hidden min-h-0">
        <div class="p-4 mt-2 bg-code-bg">
          <p>Collapsible is the simplest component — just a trigger and content.</p>
          <p class="mt-2">Perfect for FAQ items, collapsible sections, or any show/hide pattern.</p>
        </div>
      </div>
    </div>
  </div>
  <Code slot="code-css" code={cssCode} lang="html" theme="vitesse-light" />
  <Code slot="code-tailwind" code={tailwindCode} lang="html" theme="vitesse-light" />
</ExampleBlock>
