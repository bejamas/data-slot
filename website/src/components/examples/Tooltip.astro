---
import { Code } from "astro:components";
import ExampleBlock from "../ExampleBlock.astro";

const cssCode = `<div data-slot="tooltip" class="tooltip-root">
  <button data-slot="tooltip-trigger" class="tooltip-trigger-btn">Hover me</button>
  <div data-slot="tooltip-content" data-side="top" class="tooltip-content">
    Tooltip content
  </div>
</div>

<style>
  .tooltip-root { display: inline-block; }
  .tooltip-trigger-btn {
    padding: 0.5rem 1rem;
    background: none;
    border: 1px dashed #ccc;
    cursor: help;
  }
  .tooltip-content {
    position: absolute;
    background: #1a1a1a;
    color: #faf9f7;
    padding: 0.5rem 0.75rem;
    font-size: 0.85rem;
    white-space: nowrap;
    z-index: 50;
    /* Hidden by default */
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transform-origin: center;
    --tooltip-slide-x: 0px;
    --tooltip-slide-y: -4px;
    /* Visibility delays hiding until after fade */
    transition: opacity 0.15s, visibility 0s linear 0.15s;
  }
  .tooltip-content[data-side="top"] { --tooltip-slide-y: 4px; }
  .tooltip-content[data-side="bottom"] { --tooltip-slide-y: -4px; }
  .tooltip-content[data-side="left"] { --tooltip-slide-x: 4px; --tooltip-slide-y: 0px; }
  .tooltip-content[data-side="right"] { --tooltip-slide-x: -4px; --tooltip-slide-y: 0px; }
  /* Open state */
  .tooltip-content[data-open] {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transition-delay: 0s;
    animation: tooltip-in 140ms cubic-bezier(0.16, 1, 0.3, 1);
  }
  .tooltip-content[data-closed] {
    pointer-events: none;
    visibility: visible;
    animation: tooltip-out 100ms ease-in forwards;
  }
  @keyframes tooltip-in {
    from {
      opacity: 0;
      transform: translate3d(var(--tooltip-slide-x), var(--tooltip-slide-y), 0) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
    }
  }
  @keyframes tooltip-out {
    from {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
    }
    to {
      opacity: 0;
      transform: translate3d(var(--tooltip-slide-x), var(--tooltip-slide-y), 0) scale(0.98);
    }
  }
  /* Arrow */
  .tooltip-content::after {
    content: "";
    position: absolute;
    border: 6px solid transparent;
  }
  .tooltip-content[data-side="top"]::after {
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border-top-color: #1a1a1a;
  }
</style>`;

const tailwindCode = `<div data-slot="tooltip" class="inline-block">
  <button
    data-slot="tooltip-trigger"
    class="px-4 py-2 bg-transparent border border-dashed border-gray-300
           cursor-help underline decoration-dotted underline-offset-2"
  >
    Hover me
  </button>
  <div
    data-slot="tooltip-content"
    data-side="top"
    class="absolute
           bg-gray-900 text-white px-3 py-2 text-sm whitespace-nowrap z-50
           opacity-0 pointer-events-none transition-opacity duration-150
           data-[open]:opacity-100 data-[open]:pointer-events-auto
           after:content-[''] after:absolute after:top-full after:left-1/2
           after:-translate-x-1/2 after:border-[6px] after:border-transparent
           after:border-t-gray-900"
  >
    Tooltip content
  </div>
</div>`;
---

<ExampleBlock label="sides: top, bottom, left, right (+ warm-up behavior)">
  <div slot="preview-css" class="tooltip-group" id="tooltip-css">
    <div data-slot="tooltip" class="tooltip-root">
      <button data-slot="tooltip-trigger" class="tooltip-trigger-btn">Top</button>
      <div data-slot="tooltip-content" data-side="top" class="tooltip-content">
        Side: top (default)
      </div>
    </div>
    <div data-slot="tooltip" class="tooltip-root">
      <button data-slot="tooltip-trigger" class="tooltip-trigger-btn">Bottom</button>
      <div data-slot="tooltip-content" data-side="bottom" class="tooltip-content">
        Side: bottom
      </div>
    </div>
    <div data-slot="tooltip" class="tooltip-root">
      <button data-slot="tooltip-trigger" class="tooltip-trigger-btn">Left</button>
      <div data-slot="tooltip-content" data-side="left" class="tooltip-content">
        Side: left
      </div>
    </div>
    <div data-slot="tooltip" class="tooltip-root">
      <button data-slot="tooltip-trigger" class="tooltip-trigger-btn">Right</button>
      <div data-slot="tooltip-content" data-side="right" class="tooltip-content">
        Side: right
      </div>
    </div>
  </div>
  <div slot="preview-tailwind" class="flex gap-2" id="tooltip-tw">
    <div data-slot="tooltip" class="inline-block">
      <button
        data-slot="tooltip-trigger"
        class="px-4 py-2 bg-transparent border border-dashed border-gray-300 cursor-help underline decoration-dotted underline-offset-2"
      >
        Top
      </button>
      <div
        data-slot="tooltip-content"
        data-side="top"
        class="absolute bg-gray-900 text-white px-3 py-2 text-sm whitespace-nowrap z-50 opacity-0 pointer-events-none transition-opacity duration-150 data-[open]:opacity-100 data-[open]:pointer-events-auto after:content-[''] after:absolute after:top-full after:left-1/2 after:-translate-x-1/2 after:border-[6px] after:border-transparent after:border-t-gray-900"
      >
        Side: top (default)
      </div>
    </div>
    <div data-slot="tooltip" class="inline-block">
      <button
        data-slot="tooltip-trigger"
        class="px-4 py-2 bg-transparent border border-dashed border-gray-300 cursor-help underline decoration-dotted underline-offset-2"
      >
        Bottom
      </button>
      <div
        data-slot="tooltip-content"
        data-side="bottom"
        class="absolute bg-gray-900 text-white px-3 py-2 text-sm whitespace-nowrap z-50 opacity-0 pointer-events-none transition-opacity duration-150 data-[open]:opacity-100 data-[open]:pointer-events-auto after:content-[''] after:absolute after:bottom-full after:left-1/2 after:-translate-x-1/2 after:border-[6px] after:border-transparent after:border-b-gray-900"
      >
        Side: bottom
      </div>
    </div>
    <div data-slot="tooltip" class="inline-block">
      <button
        data-slot="tooltip-trigger"
        class="px-4 py-2 bg-transparent border border-dashed border-gray-300 cursor-help underline decoration-dotted underline-offset-2"
      >
        Left
      </button>
      <div
        data-slot="tooltip-content"
        data-side="left"
        class="absolute bg-gray-900 text-white px-3 py-2 text-sm whitespace-nowrap z-50 opacity-0 pointer-events-none transition-opacity duration-150 data-[open]:opacity-100 data-[open]:pointer-events-auto after:content-[''] after:absolute after:left-full after:top-1/2 after:-translate-y-1/2 after:border-[6px] after:border-transparent after:border-l-gray-900"
      >
        Side: left
      </div>
    </div>
    <div data-slot="tooltip" class="inline-block">
      <button
        data-slot="tooltip-trigger"
        class="px-4 py-2 bg-transparent border border-dashed border-gray-300 cursor-help underline decoration-dotted underline-offset-2"
      >
        Right
      </button>
      <div
        data-slot="tooltip-content"
        data-side="right"
        class="absolute bg-gray-900 text-white px-3 py-2 text-sm whitespace-nowrap z-50 opacity-0 pointer-events-none transition-opacity duration-150 data-[open]:opacity-100 data-[open]:pointer-events-auto after:content-[''] after:absolute after:right-full after:top-1/2 after:-translate-y-1/2 after:border-[6px] after:border-transparent after:border-r-gray-900"
      >
        Side: right
      </div>
    </div>
  </div>
  <p slot="note" class="mt-3">
    Side via <code>data-side</code> attribute or JS option. Hover across quickly â€” warm-up skips delay for adjacent tooltips.
  </p>
  <Code slot="code-css" code={cssCode} lang="html" theme="vitesse-light" />
  <Code slot="code-tailwind" code={tailwindCode} lang="html" theme="vitesse-light" />
</ExampleBlock>
